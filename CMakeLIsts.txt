CMAKE_MINIMUM_REQUIRED(VERSION 3.27)

SET(CMAKE_CXX_STANDARD          20)
SET(CMAKE_CXX_STANDARD_REQUIRED ON)
SET(CMAKE_CXX_EXTENSIONS       OFF)

project(
        CEngine
        VERSION 1.0.0
        LANGUAGES C CXX)

set(GLFW_BUILD_EXAMPLES			ON)
set(GLFW_BUILD_TESTS			ON)

set(CMAKE_MODULE_PATH "${PROJECT_SOURCE_DIR}/cmake/")
include(AddGitSubmodules)

if (MINGW)
    # This fixed "The program can't start because libgcc_s_dw2-1.dll is missing from your computer."
    set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -static-libgcc -static-libstdc++")
    # reduce the size by stripping symbols, only in release mode?
    #set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -s")
endif()

add_git_submodules(vendor/glfw)
add_git_submodules(vendor/glm)

include_directories("${GLFW_SOURCE_DIR}/deps")
set( GLAD_GL "${GLFW_SOURCE_DIR}/deps/glad/gl.h" )

set(Library glfw ${GLAD_GL} glm)

if (CMAKE_RELEASE)
        set(CMAKE_BUILD_TYPE=Release)
endif()

if (CMAKE_DEBUG)
        set(CMAKE_BUILD_TYPE=Debug)
endif()

add_executable(CMAKEGL "main.cpp")
target_link_libraries(CMAKEGL PRIVATE ${Library})